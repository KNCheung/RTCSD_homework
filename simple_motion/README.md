Simple Motion
==============

《实时控制软件设计》实时编程作业——定位运动轨迹生成器，作业要求说明见
[博客园](http://www.cnblogs.com/bingc/p/6147388.html)


To-do List
-----------

见[TODO.md](TODO.md)

编译&运行
-----------

0. 环境要求
    + 编译环境
        + xenomai 2.6.5 开发库
        + jsoncpp 库
        + CppUnit 库
        + 带 drawstuff 的 ODE 库
    + 运行环境
        + 正常运行 Xenomai 2.6.5 内核的 Linux 系统
        + Xenomai 需装有 Native Skin
        + 图形界面
1. 创建生成文件夹
2. 执行命令：`cmake <工程根目录>`
3. 执行编译命令：`make`
4. 在生成文件夹下的`build`目录下有生成的二进制文件
5. 复制`<工程根目录>/textures`到`build`下，创建或复制`commands_example.json`到`build/commands.json`下。
6. 执行
    + 单元测试：`build/unit_test`
    + 主程序：`build/simple_motion`
7. `build/debug.log`会输出坐标信息，格式为
    + `时间 <tab> X轴坐标 <tab> X方向速度 <tab> Y轴坐标 <tab> Y方向速度`

What's New
-----------
+ 2017-01-03
    + 加入梯形插值类的单元测试，且全部通过
   
+ 2017-01-02
    + 加入线性插值类的单元测试
    + 补充文档

+ 2016-12-28
    - 修改cmake文件，自动确定外部库文件的位置，提高移植性

+ 2016-12-21
    - 补充文档，指令数据库中允许使用注释（这一点不符合JSON标准）
    - 成功将ODE引入至工程中，并能以图形输出插值效果。

+ 2016-12-18
    - 进一步封装并保护插值类，补充少量注释。

+ 2016-12-17
    - 可以同时对多个轴进行插值（目前只加入X、Y两个轴，理论上多轴亦能正常运行）
    - 插值函数已经被彻底解耦，可以独立于本代码外运行。
    - 简化发送命令代码，准备加入文件读取指令功能。
    - 改成从文件中读取控制指令。使用jsoncpp库。命令文件使用json格式编写，需要保存在运行目录下的`commands.json`，示例见[commands_example.json](commands_example.json)

+ 2016-12-16
    - 解决不能同时放入多个插值命令的bug

+ 2016-12-12至2016-12-15
    - 完成插值类的重构，可以直接通过继承来实现不同方法的插值，并且不需要更改任务内的代码。（历时三天）
    - 现在能够同时发送多个插值命令，插值命令会被缓存在队列中，队列中最多仅能有64个命令。
    - 运动过程中的位置、速度数据会被保存在同一目录下的`debug.log`中，以`时间戳<tab>坐标<tab>速度`的形式记录。
    - 不再使用`std::shared_ptr<>`来管理指针，改为手动管理，已经处理了已知的内存泄漏问题。
    - 实现线性插值
    - 发现原来的代码有bug：不能同时放入多个插值指令，待修补。
        
+ 2016-12-11
    - 改用事件来传递插值完成等消息
    - 改用消息队列传递插值参数

+ 2016-12-10
    - 实现基本功能
    - 拆分代码，大幅降低代码耦合程度，不同的任务可以独立编译

+ 2016-12-09
    - 初始化

